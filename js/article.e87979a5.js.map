{"version":3,"file":"js/article.e87979a5.js","mappings":"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","sources":["webpack://Heimatoutiao/./src/views/article/index.vue","webpack://Heimatoutiao/src/views/article/index.vue","webpack://Heimatoutiao/./src/views/article/index.vue?f7d5","webpack://Heimatoutiao/./src/views/article/index.vue?09af"],"sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',[_c('van-nav-bar',{attrs:{\"title\":\"文章详情\",\"left-arrow\":\"\"},on:{\"click-left\":function($event){return _vm.$router.back()}}}),_c('h1',{staticClass:\"title\"},[_vm._v(_vm._s(_vm.article.title))]),_c('van-cell',{staticClass:\"user-info\",attrs:{\"center\":\"\"}},[_c('div',{staticClass:\"name\",attrs:{\"slot\":\"title\"},slot:\"title\"},[_vm._v(_vm._s(_vm.article.aut_name))]),_c('van-image',{staticClass:\"user-avatar\",attrs:{\"slot\":\"icon\",\"round\":\"\",\"fit\":\"cover\",\"src\":_vm.article.aut_photo},slot:\"icon\"}),_c('div',{staticClass:\"time\",attrs:{\"slot\":\"label\"},slot:\"label\"},[_vm._v(\" \"+_vm._s(_vm._f(\"relativeTime\")(_vm.article.pubdate))+\" \")]),_c('van-button',{staticClass:\"right-btn\",attrs:{\"type\":_vm.article.is_followed ? 'default' : 'info',\"round\":\"\",\"size\":\"small\",\"icon\":_vm.article.is_followed ? '' : 'plus',\"loading\":_vm.isFollowLoading},on:{\"click\":_vm.onFollow}},[_vm._v(_vm._s(_vm.article.is_followed ? \"已关注\" : \"关注\")+\" \")])],1),_c('div',{ref:\"article-content\",staticClass:\"content markdown-body\",domProps:{\"innerHTML\":_vm._s(_vm.article.content)}}),_c('div',{staticClass:\"article-bottom\"},[_c('van-button',{staticClass:\"comment-btn\",attrs:{\"type\":\"default\",\"round\":\"\",\"size\":\"small\"}},[_vm._v(\"写评论\")]),_c('van-icon',{attrs:{\"name\":\"comment-o\",\"info\":\"123\",\"color\":\"#777\"}}),_c('van-icon',{attrs:{\"name\":_vm.article.is_collected ? 'star' : 'star-o',\"color\":_vm.article.is_collected ? 'orange' : '#777'},on:{\"click\":_vm.onCollect}}),_c('van-icon',{attrs:{\"name\":\"good-job-o\",\"color\":\"#777\"}}),_c('van-icon',{attrs:{\"name\":\"share\",\"color\":\"#777\"}})],1)],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n\t<div>\n\t\t<!--顶部-->\n\t\t<van-nav-bar title=\"文章详情\" left-arrow @click-left=\"$router.back()\" />\n\t\t<h1 class=\"title\">{{ article.title }}</h1>\n\t\t<van-cell class=\"user-info\" center>\n\t\t\t<div class=\"name\" slot=\"title\">{{ article.aut_name }}</div>\n\t\t\t<van-image\n\t\t\t\tslot=\"icon\"\n\t\t\t\tround\n\t\t\t\tfit=\"cover\"\n\t\t\t\tclass=\"user-avatar\"\n\t\t\t\t:src=\"article.aut_photo\"\n\t\t\t/>\n\t\t\t<div slot=\"label\" class=\"time\">\n\t\t\t\t{{ article.pubdate | relativeTime }}\n\t\t\t</div>\n\t\t\t<van-button\n\t\t\t\t:type=\"article.is_followed ? 'default' : 'info'\"\n\t\t\t\tround\n\t\t\t\tsize=\"small\"\n\t\t\t\tclass=\"right-btn\"\n\t\t\t\t:icon=\"article.is_followed ? '' : 'plus'\"\n\t\t\t\t@click=\"onFollow\"\n\t\t\t\t:loading=\"isFollowLoading\"\n\t\t\t\t>{{ article.is_followed ? \"已关注\" : \"关注\" }}\n\t\t\t</van-button>\n\t\t</van-cell>\n\t\t<div\n\t\t\tclass=\"content markdown-body\"\n\t\t\tv-html=\"article.content\"\n\t\t\tref=\"article-content\"\n\t\t></div>\n\t\t<!-- 底部区域 -->\n\t\t<div class=\"article-bottom\">\n\t\t\t<van-button class=\"comment-btn\" type=\"default\" round size=\"small\"\n\t\t\t\t>写评论</van-button\n\t\t\t>\n\t\t\t<van-icon name=\"comment-o\" info=\"123\" color=\"#777\"></van-icon>\n\t\t\t<van-icon\n\t\t\t\t:name=\"article.is_collected ? 'star' : 'star-o'\"\n\t\t\t\t:color=\"article.is_collected ? 'orange' : '#777'\"\n\t\t\t\t@click=\"onCollect\"\n\t\t\t></van-icon>\n\t\t\t<van-icon name=\"good-job-o\" color=\"#777\"></van-icon>\n\t\t\t<van-icon name=\"share\" color=\"#777\"></van-icon>\n\t\t</div>\n\t</div>\n</template>\n\n<script>\nimport \"./github-markdown-light.css\";\nimport {\n\tgetArticle,\n\taddFollow,\n\tdeleteFollow,\n\taddCollect,\n\tdeleteCollect\n} from \"@/api\";\nimport { ImagePreview } from \"vant\";\n\nexport default {\n\tname: \"Artice\",\n\tdata() {\n\t\treturn {\n\t\t\t//文章数据对象\n\t\t\tarticle         : {},\n\t\t\t//关注用户的按钮\n\t\t\tisFollowLoading : false,\n\t\t\t//收藏文章的按钮\n\t\t\tisCollectLoading: false\n\t\t};\n\t},\n\tcreated() {\n\t\tthis.loadArticle();\n\t\tconsole.log(\"--------------原始content↓------------------\");\n\t},\n\tprops: {\n\t\tarticleId: {\n\t\t\ttype    : [String, Number, Object],\n\t\t\trequired: true\n\t\t}\n\t},\n\tmethods: {\n\t\t//关注用户\n\t\tasync onFollow() {\n\t\t\tthis.isFollowLoading = true;\n\t\t\tif (this.article.is_followed) {\n\t\t\t\t//已关注，取消关注\n\t\t\t\tawait deleteFollow(this.article.aut_id);\n\t\t\t\tthis.$toast(\"已取消关注\");\n\t\t\t}\n\t\t\telse {\n\t\t\t\t//未关注,添加关注\n\t\t\t\tawait addFollow(this.article.aut_id);\n\t\t\t\tthis.$toast(\"已关注\");\n\t\t\t}\n\t\t\tthis.article.is_followed = !this.article.is_followed;\n\t\t\tthis.isFollowLoading = true;\n\t\t},\n\t\t//收藏文章\n\t\tasync onCollect() {\n\t\t\tthis.isCollectLoading = true;\n\t\t\tif (this.article.is_collected) {\n\t\t\t\t//已收藏，取消收藏\n\t\t\t\tawait deleteCollect(this.articleId);\n\t\t\t\tthis.$toast.success(\"已取消收藏\");\n\t\t\t}\n\t\t\telse {\n\t\t\t\t//未收藏,添加收藏\n\t\t\t\tawait addCollect(this.articleId);\n\t\t\t\tthis.$toast.success(\"已收藏\");\n\t\t\t}\n\t\t\tthis.article.is_followed = !this.article.is_followed;\n\t\t\tthis.isCollectLoading = true;\n\t\t},\n\n\t\t//文章详情z\n\t\tasync loadArticle() {\n\t\t\tconst { data } = await getArticle(this.articleId);\n\t\t\tconsole.log(\"---------------文章数据↓-----------------\");\n\t\t\tconsole.log(data);\n\t\t\tthis.article = data;\n\t\t\t//替换头像\n\t\t\tthis.replaceAutPhoto();\n\t\t\t//替换图片\n\t\t\tthis.replaceContentImg();\n\t\t\tconsole.log(this.article.content);\n\n\t\t\t//图片预览\n\t\t\tthis.$nextTick(() => {\n\t\t\t\tthis.handlePerviewImage();\n\t\t\t});\n\t\t\t//调用预览\n\t\t},\n\t\thandlePerviewImage() {\n\t\t\t//获取dom\n\t\t\tconst articleContentDom = this.$refs[\"article-content\"];\n\t\t\tconsole.log(articleContentDom);\n\t\t\t//得到img\n\t\t\tconst imgs = articleContentDom.querySelectorAll(\"img\");\n\t\t\tconsole.log(imgs);\n\t\t\tconst imgPaths = [];\n\t\t\t//循环注册事件\n\t\t\timgs.forEach((img, index) => {\n\t\t\t\t//每循环一次将src添加到数组\n\t\t\t\timgPaths.push(img.src);\n\t\t\t\timg.onclick = function() {\n\t\t\t\t\tImagePreview({\n\t\t\t\t\t\timages       : imgPaths,\n\t\t\t\t\t\tstartPosition: index\n\t\t\t\t\t});\n\t\t\t\t};\n\t\t\t});\n\t\t},\n\t\t//随机返回一张图片\n\t\treplaceAutPhoto() {\n\t\t\tlet photos = [\n\t\t\t\t\"https://img01.yzcdn.cn/vant/cat.jpeg\",\n\t\t\t\t\"https://img01.yzcdn.cn/vant/logo.png\",\n\t\t\t\t\"https://static.wikia.nocookie.net/fcs-vs-battle/images/3/35/ASDFGuy_Vector.png/revision/latest?cb=20201113171318\",\n\t\t\t\t\"https://www.aplpackaging.co.uk/wp-content/uploads/2019/12/mailingbox-brown-310x240x114-000-300x300.jpg\"\n\t\t\t];\n\t\t\tlet randomIndex = Math.floor(Math.random() * photos.length);\n\t\t\tthis.article.aut_photo = photos[randomIndex];\n\t\t},\n\t\t//如果this.article.content中包含'\"//upload-images'字符，则从该字符开始删除，一直删到带有'\"'字符时结束，并将删除的字符替换为\"https://img01.yzcdn.cn/vant/cat.jpeg\"\n\t\t//正则实现,以此类推\n\t\treplaceContentImg() {\n\t\t\tthis.article.content = this.article.content.replace(\n\t\t\t\t/\\/\\/upload-images.*?['\"]/g,\n\t\t\t\t\"https://img01.yzcdn.cn/vant/cat.jpeg\"\n\t\t\t);\n\t\t\tthis.article.content = this.article.content.replace(\n\t\t\t\t/src=\".*?['\"]/g,\n\t\t\t\t\"src=\\\"https://img01.yzcdn.cn/vant/cat.jpeg\\\"\"\n\t\t\t);\n\t\t\tthis.article.content = this.article.content.replace(\n\t\t\t\t/data-original-src=\".*?['\"]/g,\n\t\t\t\t\"src=\\\"https://img01.yzcdn.cn/vant/cat.jpeg\\\"\"\n\t\t\t);\n\t\t}\n\t}\n};\n</script>\n\n<style lang=\"scss\" scoped>\n.markdown-body {\n\tpadding: 14px;\n\tbackground-color: #fff;\n\n\tul {\n\t\tlist-style: rean-hanja-informal;\n\t}\n\tpadding-bottom: 100px;\n}\n//底部评论区，水平垂直居中平分排列\n.article-bottom {\n\tdisplay: flex;\n\tjustify-content: space-between;\n\talign-items: center;\n\tpadding: 14px;\n\tbackground-color: #fff;\n\t//固定在底部\n\tposition: fixed;\n\tbottom: 0;\n\tleft: 0;\n\tright: 0;\n\t.comment-btn {\n\t\tcolor: #ccc;\n\t\twidth: 120px;\n\t\theight: 25px;\n\t}\n}\n\n.user-info {\n\t.name {\n\t\tfont-size: 12px;\n\t\tcolor: #333;\n\t}\n\n\t.time {\n\t\tfont-size: 11px;\n\t\tcolor: #b4b4b4;\n\t}\n\n\t.user-avatar {\n\t\twidth: 35px;\n\t\theight: 35px;\n\t\tmargin-right: 8px;\n\t}\n\n\t.right-btn {\n\t\twidth: 85px;\n\t\theight: 29px;\n\t}\n}\n\n::v-deep .van-nav-bar .van-icon {\n\tcolor: #fff;\n}\n\n.title {\n\ttext-align: center;\n\tfont-size: 20px;\n\tcolor: #333;\n\tpadding: 14px;\n\tbackground-color: #fff;\n\tmargin: 0;\n}\n</style>\n","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=8344d324&scoped=true&\"\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\nimport style0 from \"./index.vue?vue&type=style&index=0&id=8344d324&prod&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"8344d324\",\n  null\n  \n)\n\nexport default component.exports"],"names":["render","_vm","this","_c","_self","attrs","on","$event","$router","back","staticClass","_v","_s","article","title","slot","aut_name","aut_photo","_f","pubdate","is_followed","isFollowLoading","onFollow","ref","domProps","content","is_collected","onCollect","staticRenderFns","name","data","isCollectLoading","created","props","articleId","type","required","methods","handlePerviewImage","imgs","imgPaths","img","ImagePreview","images","startPosition","replaceAutPhoto","replaceContentImg","component"],"sourceRoot":""}