{"version":3,"file":"js/article.f0c0babc.js","mappings":"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","sources":["webpack://Heimatoutiao/./src/views/article/index.vue","webpack://Heimatoutiao/./src/views/article/components/comment-list.vue","webpack://Heimatoutiao/./src/views/article/components/comment-item.vue","webpack://Heimatoutiao/src/views/article/components/comment-item.vue","webpack://Heimatoutiao/./src/views/article/components/comment-item.vue?10ac","webpack://Heimatoutiao/./src/views/article/components/comment-item.vue?bb63","webpack://Heimatoutiao/src/views/article/components/comment-list.vue","webpack://Heimatoutiao/./src/views/article/components/comment-list.vue?08d9","webpack://Heimatoutiao/./src/views/article/components/comment-list.vue?b723","webpack://Heimatoutiao/src/views/article/index.vue","webpack://Heimatoutiao/./src/views/article/index.vue?f7d5","webpack://Heimatoutiao/./src/views/article/index.vue?09af"],"sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',[_c('van-nav-bar',{attrs:{\"title\":\"文章详情\",\"left-arrow\":\"\"},on:{\"click-left\":function($event){return _vm.$router.back()}}}),_c('div',{staticClass:\"article-wrap\"},[_c('h1',{staticClass:\"title\"},[_vm._v(_vm._s(_vm.article.title))]),_c('van-cell',{staticClass:\"user-info\",attrs:{\"center\":\"\"}},[_c('div',{staticClass:\"name\",attrs:{\"slot\":\"title\"},slot:\"title\"},[_vm._v(_vm._s(_vm.article.aut_name))]),_c('van-image',{staticClass:\"user-avatar\",attrs:{\"slot\":\"icon\",\"round\":\"\",\"fit\":\"cover\",\"src\":_vm.article.aut_photo},slot:\"icon\"}),_c('div',{staticClass:\"time\",attrs:{\"slot\":\"label\"},slot:\"label\"},[_vm._v(\" \"+_vm._s(_vm._f(\"relativeTime\")(_vm.article.pubdate))+\" \")]),_c('van-button',{staticClass:\"right-btn\",attrs:{\"type\":_vm.article.is_followed ? 'default' : 'info',\"round\":\"\",\"size\":\"small\",\"icon\":_vm.article.is_followed ? '' : 'plus',\"loading\":_vm.isFollowLoading},on:{\"click\":_vm.onFollow}},[_vm._v(_vm._s(_vm.article.is_followed ? \"已关注\" : \"关注\")+\" \")])],1),_c('div',{ref:\"article-content\",staticClass:\"content markdown-body\",domProps:{\"innerHTML\":_vm._s(_vm.article.content)}}),_c('CommentList',{attrs:{\"source\":_vm.articleId}})],1),_c('div',{staticClass:\"article-bottom\"},[_c('van-button',{staticClass:\"comment-btn\",attrs:{\"type\":\"default\",\"round\":\"\",\"size\":\"small\"}},[_vm._v(\"写评论\")]),_c('van-icon',{attrs:{\"name\":\"comment-o\",\"info\":\"123\",\"color\":\"#777\"}}),_c('van-icon',{attrs:{\"name\":_vm.article.is_collected ? 'star' : 'star-o',\"color\":_vm.article.is_collected ? 'orange' : '#777'},on:{\"click\":_vm.onCollect}}),_c('van-icon',{attrs:{\"name\":_vm.article.attitude === 1 ? 'good-job' : 'good-job-o',\"color\":_vm.article.attitude === 1 ? 'hotpink' : '#777'},on:{\"click\":_vm.onLike}}),_c('van-icon',{attrs:{\"name\":\"share\",\"color\":\"#777\"}})],1)],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',[_c('van-cell',{attrs:{\"title\":\"全部评论\"}}),_c('van-list',{attrs:{\"finished\":_vm.finished,\"finished-text\":\"没有更多了\"},on:{\"load\":_vm.onLoad},model:{value:(_vm.loading),callback:function ($$v) {_vm.loading=$$v},expression:\"loading\"}},_vm._l((_vm.list),function(comment,index){return _c('comment-item',{key:index,attrs:{\"comment\":comment}})}),1)],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('van-cell',{staticClass:\"comment-item\",attrs:{\"title\":\"123\"}},[_c('van-image',{staticClass:\"avatar\",attrs:{\"slot\":\"icon\",\"round\":\"\",\"fit\":\"cover\",\"src\":_vm.comment.aut_photo},slot:\"icon\"}),_c('div',{attrs:{\"slot\":\"title\"},slot:\"title\"},[_c('div',{staticClass:\"title-warp\"},[_c('div',{staticClass:\"name\"},[_vm._v(_vm._s(_vm.comment.aut_name))]),_c('div',{staticClass:\"like-wrap\",on:{\"click\":_vm.onLike}},[_c('van-icon',{class:{ liked: _vm.comment.is_liking },attrs:{\"name\":_vm.comment.is_liking ? 'good-job' : 'good-job-o'}}),_c('span',{class:{ liked: _vm.comment.is_liking }},[_vm._v(_vm._s(_vm.comment.like_count))])],1)]),_c('div',{staticClass:\"content\"},[_vm._v(_vm._s(_vm.comment.content))]),_c('div',{staticClass:\"time\"},[_c('span',[_vm._v(_vm._s(_vm._f(\"datetime\")(_vm.comment.pubdate,\"MM-DD HH:ss\")))]),_c('van-button',{staticClass:\"reply-btn\",attrs:{\"round\":\"\",\"size\":\"mini\"}},[_vm._v(\" \"+_vm._s(_vm.comment.reply_count)+\"回复 \")])],1)])],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n\t<van-cell title=\"123\" class=\"comment-item\">\n\t\t<van-image\n\t\t\tslot=\"icon\"\n\t\t\tclass=\"avatar\"\n\t\t\tround\n\t\t\tfit=\"cover\"\n\t\t\t:src=\"comment.aut_photo\"\n\t\t/>\n\t\t<div slot=\"title\">\n\t\t\t<div class=\"title-warp\">\n\t\t\t\t<div class=\"name\">{{ comment.aut_name }}</div>\n\t\t\t\t<div class=\"like-wrap\" @click=\"onLike\">\n\t\t\t\t\t<van-icon\n\t\t\t\t\t\t:class=\"{ liked: comment.is_liking }\"\n\t\t\t\t\t\t:name=\"comment.is_liking ? 'good-job' : 'good-job-o'\"\n\t\t\t\t\t/>\n\t\t\t\t\t<span :class=\"{ liked: comment.is_liking }\">{{\n\t\t\t\t\t\tcomment.like_count\n\t\t\t\t\t}}</span>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div class=\"content\">{{ comment.content }}</div>\n\t\t\t<div class=\"time\">\n\t\t\t\t<span>{{ comment.pubdate | datetime(\"MM-DD HH:ss\") }}</span>\n\t\t\t\t<van-button class=\"reply-btn\" round size=\"mini\">\n\t\t\t\t\t{{ comment.reply_count }}回复\n\t\t\t\t</van-button>\n\t\t\t</div>\n\t\t</div>\n\t</van-cell>\n</template>\n\n<script>\nimport { deleteCommentLike, addCommentLike } from \"@/api\";\n\nexport default {\n\tname : \"CommentItem\",\n\tprops: {\n\t\tcomment: {\n\t\t\ttype    : Object,\n\t\t\trequired: true\n\t\t}\n\t},\n\tmethods: {\n\t\tasync onLike() {\n\t\t\t//已点赞\n\t\t\tconst commentId = this.comment.com_id.toString();\n\t\t\tif (this.comment.is_liking) {\n\t\t\t\t//取消点赞\n\t\t\t\tawait deleteCommentLike(commentId);\n\t\t\t\t// eslint-disable-next-line vue/no-mutating-props\n\t\t\t\tthis.comment.like_count--;\n\t\t\t}\n\t\t\telse {\n\t\t\t\t//点赞\n\t\t\t\tawait addCommentLike(commentId);\n\t\t\t\t// eslint-disable-next-line vue/no-mutating-props\n\t\t\t\tthis.comment.like_count++;\n\t\t\t}\n\t\t\t//更新点赞状态\n\t\t\t// eslint-disable-next-line vue/no-mutating-props\n\t\t\tthis.comment.is_liking = !this.comment.is_liking;\n\t\t}\n\t}\n};\n</script>\n\n<style lang=\"scss\" scoped>\n.liked {\n\tcolor: hotpink;\n}\n.title-warp {\n\tdisplay: flex;\n\tjustify-content: space-between;\n}\n.van-cell__title,\n.van-cell__value {\n\tflex: unset;\n\twidth: 100%;\n}\n.comment-item {\n\t.avatar {\n\t\twidth: 36px;\n\t\theight: 36px;\n\t\tmargin-right: 13px;\n\t}\n\t.name {\n\t\tfont-size: 14px;\n\t\tcolor: #406599;\n\t}\n\t.time {\n\t\tfont-size: 9px;\n\t\tcolor: #999;\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\t.reply-btn {\n\t\t\tmargin-left: 10px;\n\t\t}\n\t}\n\t.content {\n\t\tmargin-top: 10px;\n\t\tfont-size: 16px;\n\t\tcolor: #222;\n\t}\n}\n</style>\n","import mod from \"-!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./comment-item.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./comment-item.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./comment-item.vue?vue&type=template&id=38e94a14&scoped=true&\"\nimport script from \"./comment-item.vue?vue&type=script&lang=js&\"\nexport * from \"./comment-item.vue?vue&type=script&lang=js&\"\nimport style0 from \"./comment-item.vue?vue&type=style&index=0&id=38e94a14&prod&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"38e94a14\",\n  null\n  \n)\n\nexport default component.exports","<template>\n\t<div>\n\t\t<van-cell title=\"全部评论\"></van-cell>\n\t\t<van-list\n\t\t\tv-model=\"loading\"\n\t\t\t:finished=\"finished\"\n\t\t\tfinished-text=\"没有更多了\"\n\t\t\t@load=\"onLoad\"\n\t\t>\n\t\t\t<comment-item\n\t\t\t\tv-for=\"(comment, index) in list\"\n\t\t\t\t:key=\"index\"\n\t\t\t\t:comment=\"comment\"\n\t\t\t></comment-item>\n\t\t</van-list>\n\t</div>\n</template>\n\n<script>\nimport { getComments } from \"@/api\";\nimport CommentItem from \"@/views/article/components/comment-item.vue\";\nexport default {\n\tname      : \"CommentList\",\n\tcomponents: {CommentItem},\n\tprops     : {\n\t\tsource: {\n\t\t\ttype    : [String, Number, Object],\n\t\t\trequired: true\n\t\t}\n\t},\n\tdata() {\n\t\treturn {\n\t\t\tlist    : [],\n\t\t\tloading : false,\n\t\t\tfinished: false,\n\t\t\t// 下一页页码\n\t\t\toffset  : null,\n\t\t\t//每页条数\n\t\t\tlimit   : 10\n\t\t};\n\t},\n\tmethods: {\n\t\tasync onLoad() {\n\t\t\t// 1.请求数据\n\t\t\tconst { data } = await getComments({\n\t\t\t\ttype  : \"a\",\n\t\t\t\tsource: this.source,\n\t\t\t\toffset: this.offset,\n\t\t\t\tlimit : this.limit\n\t\t\t});\n\t\t\tconsole.log(data);\n\t\t\t//2.把数据添加到list中\n\t\t\tconst { results } = data;\n\t\t\tthis.list = [...this.list, ...results];\n\t\t\tthis.loading = false;\n\t\t\t// 3.判断是否还有更多数据\n\t\t\t// 4.设置loading和finished\n\t\t\tif (results.length) {\n\t\t\t\t//获取下一页数据条码\n\t\t\t\tthis.offset = data.last_id;\n\t\t\t}\n\t\t\telse {\n\t\t\t\tthis.finished = true;\n\t\t\t}\n\t\t}\n\t}\n};\n</script>\n\n<style lang=\"scss\" scoped></style>\n","import mod from \"-!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./comment-list.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./comment-list.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./comment-list.vue?vue&type=template&id=7a995c9b&scoped=true&\"\nimport script from \"./comment-list.vue?vue&type=script&lang=js&\"\nexport * from \"./comment-list.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"7a995c9b\",\n  null\n  \n)\n\nexport default component.exports","<template>\n\t<div>\n\t\t<!--顶部-->\n\t\t<van-nav-bar title=\"文章详情\" left-arrow @click-left=\"$router.back()\" />\n\t\t<!-- 文章信息区域 -->\n\t\t<div class=\"article-wrap\">\n\t\t\t<h1 class=\"title\">{{ article.title }}</h1>\n\t\t\t<van-cell class=\"user-info\" center>\n\t\t\t\t<div class=\"name\" slot=\"title\">{{ article.aut_name }}</div>\n\t\t\t\t<van-image\n\t\t\t\t\tslot=\"icon\"\n\t\t\t\t\tround\n\t\t\t\t\tfit=\"cover\"\n\t\t\t\t\tclass=\"user-avatar\"\n\t\t\t\t\t:src=\"article.aut_photo\"\n\t\t\t\t/>\n\t\t\t\t<div slot=\"label\" class=\"time\">\n\t\t\t\t\t{{ article.pubdate | relativeTime }}\n\t\t\t\t</div>\n\t\t\t\t<van-button\n\t\t\t\t\t:type=\"article.is_followed ? 'default' : 'info'\"\n\t\t\t\t\tround\n\t\t\t\t\tsize=\"small\"\n\t\t\t\t\tclass=\"right-btn\"\n\t\t\t\t\t:icon=\"article.is_followed ? '' : 'plus'\"\n\t\t\t\t\t@click=\"onFollow\"\n\t\t\t\t\t:loading=\"isFollowLoading\"\n\t\t\t\t\t>{{ article.is_followed ? \"已关注\" : \"关注\" }}\n\t\t\t\t</van-button>\n\t\t\t</van-cell>\n\t\t\t<div\n\t\t\t\tclass=\"content markdown-body\"\n\t\t\t\tv-html=\"article.content\"\n\t\t\t\tref=\"article-content\"\n\t\t\t></div>\n\t\t\t<!-- 文章评论列表 -->\n\t\t\t<CommentList :source=\"articleId\" />\n\t\t</div>\n\t\t<!-- 底部区域 -->\n\t\t<div class=\"article-bottom\">\n\t\t\t<van-button class=\"comment-btn\" type=\"default\" round size=\"small\"\n\t\t\t\t>写评论</van-button\n\t\t\t>\n\t\t\t<van-icon name=\"comment-o\" info=\"123\" color=\"#777\"></van-icon>\n\t\t\t<van-icon\n\t\t\t\t:name=\"article.is_collected ? 'star' : 'star-o'\"\n\t\t\t\t:color=\"article.is_collected ? 'orange' : '#777'\"\n\t\t\t\t@click=\"onCollect\"\n\t\t\t></van-icon>\n\t\t\t<van-icon\n\t\t\t\t:name=\"article.attitude === 1 ? 'good-job' : 'good-job-o'\"\n\t\t\t\t:color=\"article.attitude === 1 ? 'hotpink' : '#777'\"\n\t\t\t\t@click=\"onLike\"\n\t\t\t></van-icon>\n\t\t\t<van-icon name=\"share\" color=\"#777\"></van-icon>\n\t\t</div>\n\t</div>\n</template>\n\n<script>\nimport \"./github-markdown-light.css\";\nimport CommentList from \"./components/comment-list.vue\";\nimport {\n\tgetArticle,\n\taddFollow,\n\tdeleteFollow,\n\taddCollect,\n\tdeleteCollect,\n\tdeleteLike,\n\taddLike\n} from \"@/api\";\nimport { ImagePreview } from \"vant\";\n\nexport default {\n\tname: \"Artice\",\n\tdata() {\n\t\treturn {\n\t\t\t//文章数据对象\n\t\t\tarticle         : {},\n\t\t\t//关注用户的按钮\n\t\t\tisFollowLoading : false,\n\t\t\t//收藏文章的按钮\n\t\t\tisCollectLoading: false\n\t\t};\n\t},\n\tcomponents: { CommentList },\n\tcreated() {\n\t\tthis.loadArticle();\n\t\tconsole.log(\"--------------原始content↓------------------\");\n\t},\n\tprops: {\n\t\tarticleId: {\n\t\t\ttype    : [String, Number, Object],\n\t\t\trequired: true\n\t\t}\n\t},\n\tmethods: {\n\t\t//关注用户\n\t\tasync onFollow() {\n\t\t\tthis.isFollowLoading = true;\n\t\t\tif (this.article.is_followed) {\n\t\t\t\t//已关注，取消关注\n\t\t\t\tawait deleteFollow(this.article.aut_id);\n\t\t\t\tthis.$toast(\"已取消关注\");\n\t\t\t}\n\t\t\telse {\n\t\t\t\t//未关注,添加关注\n\t\t\t\tawait addFollow(this.article.aut_id);\n\t\t\t\tthis.$toast(\"已关注\");\n\t\t\t}\n\t\t\tthis.article.is_followed = !this.article.is_followed;\n\t\t\tthis.isFollowLoading = true;\n\t\t},\n\t\t//收藏文章\n\t\tasync onCollect() {\n\t\t\t//禁止背景点击\n\t\t\tthis.$toast.loading({\n\t\t\t\tforbidClick: true,\n\t\t\t\tmessage    : \"加载中...\"\n\t\t\t});\n\t\t\tthis.isCollectLoading = true;\n\t\t\tif (this.article.is_collected) {\n\t\t\t\t//已收藏，取消收藏\n\t\t\t\tawait deleteCollect(this.articleId);\n\t\t\t}\n\t\t\telse {\n\t\t\t\t//未收藏,添加收藏\n\t\t\t\tawait addCollect(this.articleId);\n\t\t\t}\n\t\t\tthis.article.is_followed = !this.article.is_followed;\n\t\t\tthis.isCollectLoading = true;\n\t\t\tthis.$toast.success(\n\t\t\t\t`${this.article.is_collected ? \"取消\" : \"\"}收藏成功`\n\t\t\t);\n\t\t},\n\t\t//点赞\n\t\tasync onLike() {\n\t\t\t//禁止背景点击\n\t\t\tthis.$toast.loading({\n\t\t\t\tforbidClick: true,\n\t\t\t\tmessage    : \"加载中...\"\n\t\t\t});\n\t\t\tif (this.article.attitude === 1) {\n\t\t\t\t//已点赞，取消点赞\n\t\t\t\tawait deleteLike(this.articleId);\n\t\t\t\tthis.article.attitude = -1;\n\t\t\t}\n\t\t\telse {\n\t\t\t\t//未点赞,添加点赞\n\t\t\t\tawait addLike(this.articleId);\n\t\t\t\tthis.article.attitude = 1;\n\t\t\t}\n\t\t\tthis.$toast.success(\n\t\t\t\t`${this.article.attitude === 1 ? \"\" : \"取消\"}点赞成功`\n\t\t\t);\n\t\t},\n\n\t\t//文章详情z\n\t\tasync loadArticle() {\n\t\t\tconst { data } = await getArticle(this.articleId);\n\t\t\tconsole.log(\"---------------文章数据↓-----------------\");\n\t\t\tconsole.log(data);\n\t\t\tthis.article = data;\n\t\t\t//替换头像\n\t\t\tthis.replaceAutPhoto();\n\t\t\t//替换图片\n\t\t\tthis.replaceContentImg();\n\t\t\tconsole.log(this.article.content);\n\n\t\t\t//图片预览\n\t\t\tthis.$nextTick(() => {\n\t\t\t\tthis.handlePerviewImage();\n\t\t\t});\n\t\t\t//调用预览\n\t\t},\n\t\thandlePerviewImage() {\n\t\t\t//获取dom\n\t\t\tconst articleContentDom = this.$refs[\"article-content\"];\n\t\t\tconsole.log(articleContentDom);\n\t\t\t//得到img\n\t\t\tconst imgs = articleContentDom.querySelectorAll(\"img\");\n\t\t\tconsole.log(imgs);\n\t\t\tconst imgPaths = [];\n\t\t\t//循环注册事件\n\t\t\timgs.forEach((img, index) => {\n\t\t\t\t//每循环一次将src添加到数组\n\t\t\t\timgPaths.push(img.src);\n\t\t\t\timg.onclick = function() {\n\t\t\t\t\tImagePreview({\n\t\t\t\t\t\timages       : imgPaths,\n\t\t\t\t\t\tstartPosition: index\n\t\t\t\t\t});\n\t\t\t\t};\n\t\t\t});\n\t\t},\n\t\t//随机返回一张图片\n\t\treplaceAutPhoto() {\n\t\t\tlet photos = [\n\t\t\t\t\"https://img01.yzcdn.cn/vant/cat.jpeg\",\n\t\t\t\t\"https://img01.yzcdn.cn/vant/logo.png\",\n\t\t\t\t\"https://static.wikia.nocookie.net/fcs-vs-battle/images/3/35/ASDFGuy_Vector.png/revision/latest?cb=20201113171318\",\n\t\t\t\t\"https://www.aplpackaging.co.uk/wp-content/uploads/2019/12/mailingbox-brown-310x240x114-000-300x300.jpg\"\n\t\t\t];\n\t\t\tlet randomIndex = Math.floor(Math.random() * photos.length);\n\t\t\tthis.article.aut_photo = photos[randomIndex];\n\t\t},\n\t\t//如果this.article.content中包含'\"//upload-images'字符，则从该字符开始删除，一直删到带有'\"'字符时结束，并将删除的字符替换为\"https://img01.yzcdn.cn/vant/cat.jpeg\"\n\t\t//正则实现,以此类推\n\t\treplaceContentImg() {\n\t\t\tthis.article.content = this.article.content.replace(\n\t\t\t\t/\\/\\/upload-images.*?['\"]/g,\n\t\t\t\t\"https://img01.yzcdn.cn/vant/cat.jpeg\"\n\t\t\t);\n\t\t\tthis.article.content = this.article.content.replace(\n\t\t\t\t/src=\".*?['\"]/g,\n\t\t\t\t\"src=\\\"https://img01.yzcdn.cn/vant/cat.jpeg\\\"\"\n\t\t\t);\n\t\t\tthis.article.content = this.article.content.replace(\n\t\t\t\t/data-original-src=\".*?['\"]/g,\n\t\t\t\t\"src=\\\"https://img01.yzcdn.cn/vant/cat.jpeg\\\"\"\n\t\t\t);\n\t\t}\n\t}\n};\n</script>\n\n<style lang=\"scss\" scoped>\n//文章详情\n.article-wrap {\n\tposition: fixed;\n\ttop: 46px;\n\tbottom: 50px;\n\tleft: 0;\n\tright: 0;\n\toverflow: auto;\n}\n.markdown-body {\n\tpadding: 14px;\n\tbackground-color: #fff;\n\n\tul {\n\t\tlist-style: rean-hanja-informal;\n\t}\n\tpadding-bottom: 100px;\n}\n//底部评论区，水平垂直居中平分排列\n.article-bottom {\n\tdisplay: flex;\n\tjustify-content: space-between;\n\talign-items: center;\n\tpadding: 14px;\n\tbackground-color: #fff;\n\t//固定在底部\n\tposition: fixed;\n\tbottom: 0;\n\tleft: 0;\n\tright: 0;\n\t.comment-btn {\n\t\tcolor: #ccc;\n\t\twidth: 120px;\n\t\theight: 25px;\n\t}\n}\n\n.user-info {\n\t.name {\n\t\tfont-size: 12px;\n\t\tcolor: #333;\n\t}\n\n\t.time {\n\t\tfont-size: 11px;\n\t\tcolor: #b4b4b4;\n\t}\n\n\t.user-avatar {\n\t\twidth: 35px;\n\t\theight: 35px;\n\t\tmargin-right: 8px;\n\t}\n\n\t.right-btn {\n\t\twidth: 85px;\n\t\theight: 29px;\n\t}\n}\n\n::v-deep .van-nav-bar .van-icon {\n\tcolor: #fff;\n}\n\n.title {\n\ttext-align: center;\n\tfont-size: 20px;\n\tcolor: #333;\n\tpadding: 14px;\n\tbackground-color: #fff;\n\tmargin: 0;\n}\n</style>\n","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=75c3b586&scoped=true&\"\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\nimport style0 from \"./index.vue?vue&type=style&index=0&id=75c3b586&prod&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"75c3b586\",\n  null\n  \n)\n\nexport default component.exports"],"names":["render","_vm","this","_c","_self","attrs","on","$event","$router","back","staticClass","_v","_s","article","title","slot","aut_name","aut_photo","_f","pubdate","is_followed","isFollowLoading","onFollow","ref","domProps","content","articleId","is_collected","onCollect","attitude","onLike","staticRenderFns","finished","onLoad","model","value","loading","callback","$$v","expression","_l","list","comment","index","key","class","liked","is_liking","like_count","reply_count","name","props","type","required","methods","component","components","CommentItem","source","data","offset","limit","results","isCollectLoading","CommentList","created","forbidClick","message","handlePerviewImage","imgs","imgPaths","img","ImagePreview","images","startPosition","replaceAutPhoto","replaceContentImg"],"sourceRoot":""}