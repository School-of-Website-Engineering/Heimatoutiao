"use strict";(self["webpackChunkHeimatoutiao"]=self["webpackChunkHeimatoutiao"]||[]).push([[942],{4673:function(t,a,i){i.r(a),i.d(a,{default:function(){return h}});var e=function(){var t=this,a=t._self._c;return a("div",[a("van-nav-bar",{attrs:{title:"文章详情","left-arrow":""},on:{"click-left":function(a){return t.$router.back()}}}),a("h1",{staticClass:"title"},[t._v(t._s(t.article.title))]),a("van-cell",{staticClass:"user-info",attrs:{center:""}},[a("div",{staticClass:"name",attrs:{slot:"title"},slot:"title"},[t._v(t._s(t.article.aut_name))]),a("van-image",{staticClass:"user-avatar",attrs:{slot:"icon",round:"",fit:"cover",src:t.article.aut_photo},slot:"icon"}),a("div",{staticClass:"time",attrs:{slot:"label"},slot:"label"},[t._v(" "+t._s(t._f("relativeTime")(t.article.pubdate))+" ")]),a("van-button",{staticClass:"right-btn",attrs:{type:t.article.is_followed?"default":"info",round:"",size:"small",icon:t.article.is_followed?"":"plus",loading:t.isFollowLoading},on:{click:t.onFollow}},[t._v(t._s(t.article.is_followed?"已关注":"关注")+" ")])],1),a("div",{ref:"article-content",staticClass:"content markdown-body",domProps:{innerHTML:t._s(t.article.content)}}),a("div",{staticClass:"article-bottom"},[a("van-button",{staticClass:"comment-btn",attrs:{type:"default",round:"",size:"small"}},[t._v("写评论")]),a("van-icon",{attrs:{name:"comment-o",info:"123",color:"#777"}}),a("van-icon",{attrs:{name:t.article.is_collected?"star":"star-o",color:t.article.is_collected?"orange":"#777"},on:{click:t.onCollect}}),a("van-icon",{attrs:{name:"good-job-o",color:"#777"}}),a("van-icon",{attrs:{name:"share",color:"#777"}})],1)],1)},s=[],o=(i(7658),i(7756)),l=i(993),c={name:"Artice",data(){return{article:{},isFollowLoading:!1,isCollectLoading:!1}},created(){this.loadArticle()},props:{articleId:{type:[String,Number,Object],required:!0}},methods:{async onFollow(){this.isFollowLoading=!0,this.article.is_followed?(await(0,o.VR)(this.article.aut_id),this.$toast("已取消关注")):(await(0,o.R3)(this.article.aut_id),this.$toast("已关注")),this.article.is_followed=!this.article.is_followed,this.isFollowLoading=!0},async onCollect(){this.isCollectLoading=!0,this.article.is_collected?(await(0,o.qI)(this.articleId),this.$toast.success("已取消收藏")):(await(0,o._Y)(this.articleId),this.$toast.success("已收藏")),this.article.is_followed=!this.article.is_followed,this.isCollectLoading=!0},async loadArticle(){const{data:t}=await(0,o.fq)(this.articleId);this.article=t,this.replaceAutPhoto(),this.replaceContentImg(),this.$nextTick((()=>{this.handlePerviewImage()}))},handlePerviewImage(){const t=this.$refs["article-content"],a=t.querySelectorAll("img"),i=[];a.forEach(((t,a)=>{i.push(t.src),t.onclick=function(){(0,l.Z)({images:i,startPosition:a})}}))},replaceAutPhoto(){let t=["https://img01.yzcdn.cn/vant/cat.jpeg","https://img01.yzcdn.cn/vant/logo.png","https://static.wikia.nocookie.net/fcs-vs-battle/images/3/35/ASDFGuy_Vector.png/revision/latest?cb=20201113171318","https://www.aplpackaging.co.uk/wp-content/uploads/2019/12/mailingbox-brown-310x240x114-000-300x300.jpg"],a=Math.floor(Math.random()*t.length);this.article.aut_photo=t[a]},replaceContentImg(){this.article.content=this.article.content.replace(/\/\/upload-images.*?['"]/g,"https://img01.yzcdn.cn/vant/cat.jpeg"),this.article.content=this.article.content.replace(/src=".*?['"]/g,'src="https://img01.yzcdn.cn/vant/cat.jpeg"'),this.article.content=this.article.content.replace(/data-original-src=".*?['"]/g,'src="https://img01.yzcdn.cn/vant/cat.jpeg"')}}},n=c,r=i(1001),d=(0,r.Z)(n,e,s,!1,null,"8344d324",null),h=d.exports}}]);
//# sourceMappingURL=article.e87979a5.js.map